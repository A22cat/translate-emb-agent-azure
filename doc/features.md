# 翻訳埋込エージェント (TranslateEmbAgent)- 機能概要

## 1. Azureサービスの使用方法

Azureの多様なPaaSサービスをLangChainフレームワークを用いて連携させることで、ワークフロー全体を処理する高度な翻訳埋込エージェントを構築しました。

各Azureサービスの使用方法は以下の通りです。

- Azure Computer Vision：  
OCR機能を使用して、ユーザーがアップロードしたあらゆる画像から高精度に英語テキストを検出・抽出します。

- Azure Translator：  
Computer Visionから抽出されたテキストを受け取り、高品質で自然な日本語への翻訳を提供します。

- Azure OpenAI Service (Embeddingモデル)：  
text-embedding-ada-002 または text-embedding-3-small モデルなどを使用して、翻訳された日本語テキストを数値ベクトル（埋め込み）に変換します。この重要なステップがテキストの意味的な本質を捉え、私たちの高度な検索機能を可能にしています。

- Azure Cosmos DB：  
・ドキュメントストアとして、各処理のすべてのメタデータ（原文、訳文、画像URLなど）を柔軟なJSON形式で保存します。  
・ベクトルデータベースとして、専用のデータベースを用意することなく、生成された埋め込みを保存し、類似検索を実行できます。これは、RAG（検索拡張生成）パターンにおける検索ステップのナレッジベースを最適に活用する仕組みです。

- Azure Blob Storage：  
加工前画像と加工済み（テキスト埋め込み）画像を安全に保存し、Cosmos DBに保存されたURLから参照できます。

- Azure App Service： 
Python（Streamlit）で構築されたWebアプリケーションの実行環境です。ユーザーインターフェースを提供し、Azureサービスとの連携を調整しながらアプリケーションの実行環境を支えるプラットフォームです。



## 2. 主な機能（デモ動画との連携）

「翻訳埋込エージェント（TranslateEmbAgent）」は、デモ動画で示した通り、以下の革新的な機能を提供します。

* **\[00:15～\] ① AIによる画像翻訳と埋込の完全自動化**
    * ユーザーは翻訳したい外国語（英語）の画像をアップロードし、ボタンを一つ押すだけです。
    * **LangChain**フレームワークで連携されたAIエージェントが、以下の処理をシームレスに実行します。
        1.  **OCR処理:** Azure AI Visionが画像内の英語テキストを正確に抽出。
        2.  **翻訳処理:** Azure AI Translatorが高品質な日本語へ翻訳。
        3.  **画像埋込:** 翻訳文を元の画像に視覚的に埋め込み、加工済み画像を生成。
        4.  **ナレッジ保存:** 元画像、加工済み画像、原文、訳文、そして訳文の**ベクトル埋め込み**をAzure Blob StorageとCosmos DBに自動で保存します。

* **\[01:25～\] ② 高度な翻訳履歴検索（ハイブリッド検索）**
    * 蓄積された翻訳履歴は、単なる記録ではありません。いつでも呼び出せる知識ベースです。
    * **ハイブリッド検索:** 「動物が走る」のように、**意味的な近さ（ベクトル検索）とキーワードの一致（全文検索）の両方を考慮**し、最も関連性の高い結果を提示します。
    * **ベクトル検索:** 「犬が走る」のように、**類義語や異なる表現も意味で理解**し、関連する履歴を類似度順に表示します。
    * **全文検索:** 「バナナ」のように、**特定のキーワードを含む履歴を正確に**探し出します。


## 3. 解決したい課題

語学学習や多言語業務の現場では、教材や案内文が外国語のみで提供されることが多く、内容の理解が難しくなることで、学習や業務の効率が低下することがあります。また、絵本や漫画の翻訳業務では、専門的な語彙や独特の表現、文化的なニュアンスを正確に把握し適切に伝える必要があるため、翻訳作業が難航することがあります。

## 4. ビジネスへの貢献

「TransEmbPic」は、言語の壁を解消し、様々なシーンで生産性と創造性を向上させます。

| ユースケース | 効果 |
| :--- | :--- |
| **教育関係者** | 外国語の絵本や教材に母国語の補助を簡単に追加でき、**生徒の理解度と学習意欲を向上**させます。教材作成の工数も大幅に削減します。 |
| **多言語業務現場** | 海外のマニュアルや案内状、図面などを瞬時に翻訳・共有。**チーム内の情報格差をなくし、迅速で正確なコミュニケーションを実現**します。 |
| **翻訳・クリエイティブ業務** | 絵本や漫画の翻訳作業で、訳文を画像に当てはめた際のプレビューを即座に確認可能。**翻訳の品質と作業効率を飛躍的に高め**、クリエイティブな表現に集中できます。 |

